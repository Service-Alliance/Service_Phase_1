<div class="container-fluid">
    <div class="row">
        <div class="col-xs-10 table-responsive">
            <h1>Customers/Contacts</h1>

            <!-- <%= select_tag("filter", options_for_select(JobStatus.all.map{|p| [p.name, p.id]}, class: "form-control")) %> -->
            <!-- comment -->
            <div class="row">
                <div class="col-xs-12">
                    <!-- <a
                        href="/jobs?utf8=%E2%9C%93&q%5Bcaller_full_name_cont%5D=&q%5Bcustomer_full_name_cont%5D=&q%5Bfranchise_id_in%5D%5B%5D=&q%5Bjob_detail_insurance_company_id_not_in%5D%5B%5D=&q%5Bjob_detail_insurance_company_id_not_in%5D%5B%5D=234&q%5Bstatus_id_in%5D%5B%5D=&q%5Bentered_by_id_in%5D%5B%5D=&q%5Breferral_employee_id_in%5D%5B%5D=&q%5Breferral_employee_id_not_in%5D%5B%5D=47&q%5Blosses_loss_type_id_in%5D%5B%5D=&q%5Blosses_loss_type_id_not_in%5D%5B%5D=16&q%5Bcustomer_address_state_id_in%5D%5B%5D=&q%5Bcustomer_address_state_id_in%5D%5B%5D=32&q%5Breferral_type_id_in%5D%5B%5D=&q%5Bagent_id_in%5D%5B%5D=&q%5Badjuster_id_in%5D%5B%5D=&q%5Bjob_managers_job_manager_id_in%5D%5B%5D=&commit=Search"
                        class="btn btn-primary">New York Data</a>

                    <a
                        class="btn btn-primary"
                        href="/jobs?utf8=%E2%9C%93&q%5Bcaller_full_name_cont%5D=&q%5Bcustomer_full_name_cont%5D=&q%5Bfranchise_id_in%5D%5B%5D=&q%5Bjob_detail_insurance_company_id_not_in%5D%5B%5D=&q%5Bjob_detail_insurance_company_id_not_in%5D%5B%5D=234&q%5Bstatus_id_in%5D%5B%5D=&q%5Bentered_by_id_in%5D%5B%5D=&q%5Breferral_employee_id_in%5D%5B%5D=&q%5Breferral_employee_id_not_in%5D%5B%5D=47&q%5Blosses_loss_type_id_in%5D%5B%5D=&q%5Blosses_loss_type_id_not_in%5D%5B%5D=16&q%5Bcustomer_address_state_id_in%5D%5B%5D=&q%5Bcustomer_address_state_id_in%5D%5B%5D=30&q%5Breferral_type_id_in%5D%5B%5D=&q%5Bagent_id_in%5D%5B%5D=&q%5Badjuster_id_in%5D%5B%5D=&q%5Bjob_managers_job_manager_id_in%5D%5B%5D=&commit=Search">New Jersey Data</a> -->
                </div>
            </div>


            <table id="job-table" class="table table-striped">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>Zip</th>
                        <th>State</th>
                        <th>County</th>
                        <th>Sales Rep</th>
                    </tr>
                </thead>
                <!-- Sort by date entered -->
                <!-- Sort by date ranmge -->
                <!-- Full text search -->
                <!--  Sorting -->
                <!--  -->

                <tbody>
                    <% @customers.each do |customer| %>
                    <tr>
                        <td><%= customer.try(:full_name) %></td>
                        <td><%= customer.try(:email) %></td>
                        <td><%= customer.try(:address).try(:address_1) %></td>
                        <td><%= customer.try(:address).try(:city) %></td>
                        <td><%= customer.try(:address).try(:zip_code) %></td>
                        <td><%= customer.try(:address).try(:state).try(:name) %></td>
                        <td><%= customer.try(:address).try(:county) %></td>
                        <td><%= customer.try(:owner).try(:full_name) %></td>
                        <td><%= link_to 'Show', customer %></td>
                        <% if current_user.admin?%>
                        <td><%= link_to 'Destroy', customer, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                        <% end %>

                    </tr>
                    <% end %>
                </tbody>
            </table>
            <%= paginate @customers %>
            <br>

            <%= link_to 'New Job', new_job_path %>
        </div>
        <div class="col-xs-2 margin-top-5">
            <%= search_form_for @search do |f| %>
            <%= f.label :full_name, "Name" %><br/>
            <%= f.search_field :full_name_cont, {class: "form-control"} %>
            <%= f.label :email, "Email" %><br/>
            <%= f.search_field :email_cont, {class: "form-control"} %>
            <%= f.label :address_address_1, "Address" %><br/>
            <%= f.search_field :address_address_1_cont, {class: "form-control"} %>
            <%= f.label :address_city, "City" %><br/>
            <%= f.search_field :address_city_cont, {class: "form-control"} %>
            <%= f.label :address_zip_code, "Zip Code" %><br/>
            <%= f.search_field :address_zip_code_cont, {class: "form-control"} %>
            <%= f.label :address_state_name, "State" %><br/>
            <%= f.search_field :address_city_cont, {class: "form-control"} %>
            <%= f.label :address_county, "County" %><br/>
            <%= f.search_field :address_county_cont, {class: "form-control"} %>
            <%= f.label :owner_id_in, "Sales Rep" %><br/>
            <%= f.select :owner_id_in, options_from_collection_for_select(User.all, "id", "full_name"), {include_blank: true}, {class: "form-control select-control", multiple: "multiple"} %><br/>

            <div class="actions"><%= f.submit "Search", class:"btn btn-primary margin-top-2" %></div>

            <% end %>
        </div>
    </div>
</div>
<p id="notice"><%= notice %></p>

<script>
flatpickr(".datePicker", {
    // defaultDate: new Date(),
    // create an extra input solely for display purposes
    altInput: true,
    altFormat: "F j, Y"
});

</script>
