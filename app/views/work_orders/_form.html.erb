<%= simple_form_for [@job, @work_order] do |f| %>
  <% if @work_order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@work_order.errors.count, "error") %>
          prohibited this work_order from being saved:</h2>
      <ul>
        <% @work_order.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
    <hr/>
  <% end %>
  <div class="col-xs-12">
    <h2>SERVPRO of <%= @job.try(:franchise).try(:name) %></h2>
    <h2><%= @job.try(:franchise).try(:phone) %></h2>
  </div>
  <div class="clearfix">
    <%= f.input :crew_chief_ids, collection: User.with_role('Crew Chief'), label_method: :full_name, input_html: {multiple: true, class: 'select-control form-control', style: 'width: 100%'}, wrapper_html: {class: 'col-sm-6'}, label: 'Crew Chief(s)' %>
    <%= f.input :technician_ids, collection: User.with_role('Technician'), label_method: :full_name, input_html: {multiple: true, class: 'select-control form-control', style: 'width: 100%'}, wrapper_html: {class: 'col-sm-6'}, label: 'Technician(s)' %>
  </div>
  <%= f.input :vendor_ids, collection: Vendor.order(:name), label_method: :name, input_html: {multiple: true, class: 'select-control form-control', style: 'width: 100%'}, wrapper_html: {class: 'col-sm-12'}, label: 'Vendors' %>

  <%= f.input :typed_by, as: :string, wrapper_html: {class: 'col-sm-4'} %>
  <%= f.input :name, as: :string, wrapper_html: {class: 'col-sm-4'}, label: 'Loss Coordinator' %>
  <%= f.input :date, as: :string, input_html: {class: 'datePicker'}, wrapper_html: {class: 'col-sm-4'} %>
  <div class="col-xs-12">
    <hr/>
  </div>
  <h2 class="text-center">Work Order</h2>
  <%= f.input :job_start, as: :datetime, ampm: true, wrapper_html: {class: 'col-sm-12'} %>
  <%= f.input :job_name, as: :string, wrapper_html: {class: 'col-sm-12'} %>
  <%= f.input :job_location, as: :string, wrapper_html: {class: 'col-sm-12'}, disabled: true %>
  <%= f.input :telephone, as: :string, wrapper_html: {class: 'col-sm-12'} %>
  <%= f.input :contact, as: :string, wrapper_html: {class: 'col-sm-12'} %>

  <%= f.input :insurance, as: :string, wrapper_html: {class: 'col-sm-3'} %>
  <%= f.input :claim_number, as: :string, wrapper_html: {class: 'col-sm-3'} %>
  <%= f.input :crew, as: :string, wrapper_html: {class: 'col-sm-3'} %>
  <%= f.input :approx_time_on_loss, wrapper_html: {class: 'col-sm-3'} unless @work_order.new_record? %>

  <%= f.input :required, wrapper_html: {class: 'col-sm-12'} %>
  <%= f.input :referral, as: :string, wrapper_html: {class: 'col-sm-12'} %>
  <%= f.input :franchise_location, as: :string, wrapper_html: {class: 'col-sm-12'}, disabled: true %>
  <%= f.input :scope_of_work, wrapper_html: {class: 'col-sm-12'} %>
  <%= f.input :job_manager_contact_info, as: :string, wrapper_html: {class: 'col-sm-12'}, disabled: true %>
  <div class="actions col-sm-12">
      <%= f.submit class: "btn btn-primary" %>
  </div>
<% end %>
